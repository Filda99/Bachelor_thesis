/**
 ***************************************************************************************************
 * @file    mapping.c
 * @author  user
 * @date    Dec 15, 2022
 * @brief   
 ***************************************************************************************************
 */

//**************************************************************************************************
//* INCLUDES
//**************************************************************************************************
#include "global_macros.h"
#include "stdint.h"

//**************************************************************************************************
//* EXTERN VARIABLES
//**************************************************************************************************
extern unsigned int HalfWheelRotations;

//**************************************************************************************************
//* PRIVATE MACROS AND DEFINES
//**************************************************************************************************

//**************************************************************************************************
//* PRIVATE TYPEDEFS
//**************************************************************************************************

//**************************************************************************************************
//* STATIC VARIABLES
//**************************************************************************************************

//**************************************************************************************************
//* GLOBAL VARIABLES
//**************************************************************************************************

//**************************************************************************************************
//* STATIC FUNCTION PROTOTYPES
//**************************************************************************************************

//**************************************************************************************************
 //* STATIC FUNCTIONS
//**************************************************************************************************

//**************************************************************************************************
//* GLOBAL FUNCTIONS
//**************************************************************************************************

//!*************************************************************************************************
//! void mapping(void)
//!
//! @description
//! Brief description
//!
//! @param    None
//!
//! @return   None
//!*************************************************************************************************
void mapping()
{
	// distance = 2*pi*r
	// r = ~1.7
	// One rotation is ~10.5cm, so one HalfWheelRotation is 5cm

	// Distance traveled from previous mapping
	uint32_t newRotations, distance = 0;

	// Number of half-wheel rotations from previous mapping
	static uint32_t prevNoWheelRot = 0;

	// Get distance from previous position
	newRotations = HalfWheelRotations - prevNoWheelRot;
	distance = newRotations * 5;

	// If the wheel moves a full turn, add one cm to distance
	if ((HalfWheelRotations % 2) == 0)
	{
		distance += newRotations;
	}

	if (distance > MAP_BLOCK_SIZE)
	{
		//moveInMap();
	}

}


