/**
 ********************************************************************************
 * @file    routine.c
 * @author  user
 * @date    Jul 18, 2022
 * @brief
 ********************************************************************************
 */

//**************************************************************************************************
//* INCLUDES
//**************************************************************************************************
#include "routine.h"
#include "MKL25Z4.h"
#include "global_macros.h"

#include "fsl_tpm.h"
#include "fsl_gpio.h"
#include "fsl_debug_console.h"

#include "motors/engines.h"
#include "control_unit.h"
#include "vector.h"

//**************************************************************************************************
//* EXTERN VARIABLES
//**************************************************************************************************
extern struct vector vLeft, vRight;

//**************************************************************************************************
//* PRIVATE MACROS AND DEFINES
//**************************************************************************************************

//**************************************************************************************************
//* PRIVATE TYPEDEFS
//**************************************************************************************************

//**************************************************************************************************
//* STATIC VARIABLES
//**************************************************************************************************

//**************************************************************************************************
//* GLOBAL VARIABLES
//**************************************************************************************************

//**************************************************************************************************
//* STATIC FUNCTION PROTOTYPES
//**************************************************************************************************

//**************************************************************************************************
//* STATIC FUNCTIONS
//**************************************************************************************************

//!*************************************************************************************************
//! void checkLine(void)
//!
//! @description
//! Get the data from the camera and based on that decide how much and where to turn.
//!
//!
//! @param    None
//!
//! @return   None
//!*************************************************************************************************
static void checkLines()
{
	vLeft.initial.x = 0;
	vLeft.initial.y = 0;
	vLeft.final.x = 0;
	vLeft.final.y = 0;

	vRight.initial.x = 0;
	vRight.initial.y = 0;
	vRight.final.x = 0;
	vRight.final.y = 0;
}

//**************************************************************************************************
//* GLOBAL FUNCTIONS
//**************************************************************************************************

//!*************************************************************************************************
//! void routine(void)
//!
//! @description
//! Function
//!
//! @param    None
//!
//! @return   None
//!*************************************************************************************************
void routine(void)
{
	checkLines();
	float angle = vectorCalculation();
	controlUnit(angle);
}

